use db1
go

DROP TABLE [dbo].[fechas_locacion]
GO
DROP TABLE [dbo].[empleado_solicitar]
GO
DROP TABLE [dbo].[empleado_aprobacion]
GO
DROP TABLE [dbo].[FEC_RESERVADAS]
GO
DROP TABLE [dbo].[REINTEGRO]
GO
DROP TABLE [dbo].[SOLICITUD]
GO
DROP TABLE [dbo].[EMPLEADO]
GO
DROP TABLE [dbo].[PUESTO]
GO
DROP TABLE [dbo].[LOCACION]
GO
DROP TABLE [dbo].[DEPARTAMENTO]
GO


CREATE TABLE PUESTO
(
  ID_PUESTO INT NOT NULL,
  NOMBRE_PUESTO VARCHAR(50) NOT NULL,
  SALARIO_MIN INT NOT NULL,
  SALARIO_MAX INT NOT NULL,
  PRIMARY KEY (ID_PUESTO)
);
go

CREATE TABLE LOCACION
(
  ID_LOCACION INT NOT NULL,
  PROVINCIA VARCHAR(20) NOT NULL,
  CANTON VARCHAR(20) NOT NULL,
  DISTRITO VARCHAR(20) NOT NULL,
  PRIMARY KEY (ID_LOCACION)
);
go

CREATE TABLE DEPARTAMENTO
(
  ID_DEPARTAMENTO INT NOT NULL,
  NOMBRE_DEPARTAMENTO VARCHAR(50) NOT NULL,
  ID_JEFATURA INT NOT NULL,
  PRIMARY KEY (ID_DEPARTAMENTO)
 
);
go

CREATE TABLE EMPLEADO
(
  CEDULA INT NOT NULL,
  ID_EMPLEADO INT NOT NULL,
  NOMBRE VARCHAR(50) NOT NULL,
  APELLIDO1 VARCHAR(50) NOT NULL,
  APELLIDO2 VARCHAR(50) NOT NULL,
  CORREO VARCHAR(50) NOT NULL,
  TELEFONO INT NOT NULL,
  FEC_INGRESO DATE NOT NULL,
  FEC_SALIDA DATE,
  ID_PUESTO INT NOT NULL,
  ID_JEFATURA INT,
  ID_DEPARTAMENTO INT NOT NULL,
  DIAS_VACACIONES INT NOT NULL,
  TIPO_JORNADA VARCHAR(20) NOT NULL,
  TIPO_PERFIL VARCHAR(20) NOT NULL,
  ID_LOCACION INT NOT NULL,
  PRIMARY KEY (ID_EMPLEADO),
  FOREIGN KEY (ID_PUESTO) REFERENCES PUESTO(ID_PUESTO),
  FOREIGN KEY (ID_DEPARTAMENTO) REFERENCES DEPARTAMENTO(ID_DEPARTAMENTO),
  FOREIGN KEY (ID_LOCACION) REFERENCES LOCACION(ID_LOCACION),
  FOREIGN KEY (ID_JEFATURA) REFERENCES EMPLEADO(ID_EMPLEADO),

  UNIQUE (CEDULA)
);
go

CREATE TABLE SOLICITUD
(
  ID_SOLICITUD INT NOT NULL,
  FEC_SALIDA DATE NOT NULL,
  FEC_REGRESO DATE NOT NULL,
  FEC_SOLICITUD DATE NOT NULL,
  CONCEPTO VARCHAR(20) NOT NULL,
  ESTADO_SOL VARCHAR(20) NOT NULL,
  ID_EMPLEADO INT NOT NULL,
  PRIMARY KEY (ID_SOLICITUD),
  FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO(ID_EMPLEADO)
);
go

CREATE TABLE REINTEGRO
(
  ID_REINTEGRO INT NOT NULL,
  ID_SOLICITUD INT NOT NULL,
  DESCRIPCION VARCHAR(200) NOT NULL,
  ESTADO_SOLICITUD VARCHAR(20) NOT NULL,
  FEC_REINTEGRO DATE NOT NULL,
  PRIMARY KEY (ID_REINTEGRO),
  FOREIGN KEY (ID_SOLICITUD) REFERENCES SOLICITUD(ID_SOLICITUD)
);
GO

CREATE TABLE FEC_RESERVADAS
(
  ID_FECHA INT NOT NULL,
  FECHA DATE NOT NULL,
  CONCEPTO VARCHAR(20) NOT NULL,
  ID_LOCACION INT NOT NULL,
  PRIMARY KEY (ID_FECHA),
  FOREIGN KEY (ID_LOCACION) REFERENCES LOCACION (ID_LOCACION)
);


create table empleado_aprobacion(ID_EMP_APROBAR INT NOT NULL, ID_EMP_PERMISO_APROBAR INT NOT NULL);
GO

alter table empleado_aprobacion add constraint emp_a_aprob_fk foreign key (ID_EMP_APROBAR) references EMPLEADO;
alter table empleado_aprobacion add constraint emp_con_permisos_aprobar_fk foreign key (ID_EMP_PERMISO_APROBAR) references EMPLEADO;
GO

create table empleado_solicitar(ID_EMP_SOLICITAR INT NOT NULL, ID_EMP_PERMISO_SOLICITAR INT NOT NULL);
GO

alter table empleado_solicitar add constraint emp_a_solicitar_fk foreign key (ID_EMP_SOLICITAR) references EMPLEADO;
alter table empleado_solicitar add constraint emp_con_permisos_solicitar_fk foreign key (ID_EMP_PERMISO_SOLICITAR) references EMPLEADO;
GO

create table fechas_locacion(ID_FECHA_RESERVADA INT NOT NULL, ID_LOCACION_A_RESERVAR INT NOT NULL);
GO

alter table fechas_locacion add constraint fec_reservada_fk foreign key (ID_FECHA_RESERVADA) references FEC_RESERVADAS;
alter table fechas_locacion add constraint loc_reservada_fk foreign key (ID_LOCACION_A_RESERVAR) references LOCACION;


INSERT INTO [dbo].[PUESTO] ([ID_PUESTO],[NOMBRE_PUESTO],[SALARIO_MIN],[SALARIO_MAX])
VALUES (11, 'Contador', 550000, 850000)

INSERT INTO [dbo].[PUESTO] ([ID_PUESTO],[NOMBRE_PUESTO],[SALARIO_MIN],[SALARIO_MAX])
VALUES (12, 'Ing Sistemas', 750000, 1250000)

INSERT INTO [dbo].[PUESTO] ([ID_PUESTO],[NOMBRE_PUESTO],[SALARIO_MIN],[SALARIO_MAX])
VALUES (13, 'Servicio al cliente Esp', 500000, 650000)

INSERT INTO [dbo].[PUESTO] ([ID_PUESTO],[NOMBRE_PUESTO],[SALARIO_MIN],[SALARIO_MAX])
VALUES (14, 'Servicio al cliente Ing', 700000, 850000)

INSERT INTO [dbo].[PUESTO] ([ID_PUESTO],[NOMBRE_PUESTO],[SALARIO_MIN],[SALARIO_MAX])
VALUES (15, 'Asistente', 500000, 650000)

GO

INSERT INTO [dbo].[LOCACION]([ID_LOCACION],[PROVINCIA],[CANTON],[DISTRITO])
VALUES (21, 'Alajuela', 'Alajuela', 'San Antonio')

INSERT INTO [dbo].[LOCACION]([ID_LOCACION],[PROVINCIA],[CANTON],[DISTRITO])
VALUES (22, 'San Jose', 'San Jose', 'Carmen')

INSERT INTO [dbo].[LOCACION]([ID_LOCACION],[PROVINCIA],[CANTON],[DISTRITO])
VALUES (23, 'Cartago', 'Cartago', 'Occidental')

INSERT INTO [dbo].[LOCACION]([ID_LOCACION],[PROVINCIA],[CANTON],[DISTRITO])
VALUES (24, 'Limon', 'Limon', 'Rio Blanco')

INSERT INTO [dbo].[LOCACION]([ID_LOCACION],[PROVINCIA],[CANTON],[DISTRITO])
VALUES (25, 'Heredia', 'Heredia', 'San Francisco')

GO

INSERT INTO [dbo].[DEPARTAMENTO]([ID_DEPARTAMENTO],[NOMBRE_DEPARTAMENTO],[ID_JEFATURA])
VALUES (31, 'IT', 700)

INSERT INTO [dbo].[DEPARTAMENTO]([ID_DEPARTAMENTO],[NOMBRE_DEPARTAMENTO],[ID_JEFATURA])
VALUES (32, 'Contabilidad', 701)

INSERT INTO [dbo].[DEPARTAMENTO]([ID_DEPARTAMENTO],[NOMBRE_DEPARTAMENTO],[ID_JEFATURA])
VALUES (33, 'Recursos Humanos', 702)

INSERT INTO [dbo].[DEPARTAMENTO]([ID_DEPARTAMENTO],[NOMBRE_DEPARTAMENTO],[ID_JEFATURA])
VALUES (34, 'Servicioa Cliente', 703)

INSERT INTO [dbo].[DEPARTAMENTO]([ID_DEPARTAMENTO],[NOMBRE_DEPARTAMENTO],[ID_JEFATURA])
VALUES (35, 'Operario', 704)

GO

INSERT INTO [dbo].[EMPLEADO]([CEDULA],[ID_EMPLEADO],[NOMBRE],[APELLIDO1],[APELLIDO2],[CORREO],[TELEFONO],[FEC_INGRESO],[FEC_SALIDA]
           ,[ID_PUESTO],[ID_JEFATURA],[ID_DEPARTAMENTO],[DIAS_VACACIONES],[TIPO_JORNADA],[TIPO_PERFIL],[ID_LOCACION])
     VALUES
           (11111111, 100, 'Juan', 'Rojas', 'Villalobos', 'juan@gmail.com', 88888881,'2020-12-15', null, 
		   11, null, 31,18,'Diurno', 'Admin', 21)

INSERT INTO [dbo].[EMPLEADO]([CEDULA],[ID_EMPLEADO],[NOMBRE],[APELLIDO1],[APELLIDO2],[CORREO],[TELEFONO],[FEC_INGRESO],[FEC_SALIDA]
           ,[ID_PUESTO],[ID_JEFATURA],[ID_DEPARTAMENTO],[DIAS_VACACIONES],[TIPO_JORNADA],[TIPO_PERFIL],[ID_LOCACION])
     VALUES
           (11111112, 101, 'Maria', 'Madriz', 'Calvo', 'maria@gmail.com', 88888882,'2020-10-13', null, 
		   12, 100, 32,11,'Diurno', 'Admin', 22)

INSERT INTO [dbo].[EMPLEADO]([CEDULA],[ID_EMPLEADO],[NOMBRE],[APELLIDO1],[APELLIDO2],[CORREO],[TELEFONO],[FEC_INGRESO],[FEC_SALIDA]
           ,[ID_PUESTO],[ID_JEFATURA],[ID_DEPARTAMENTO],[DIAS_VACACIONES],[TIPO_JORNADA],[TIPO_PERFIL],[ID_LOCACION])
     VALUES
           (11111113, 102, 'Carlos', 'Guerrero', 'Garcia', 'carlos@gmail.com', 88888883,'2015-10-13', null, 
		   13, 100, 33,2,'Diurno', 'Admin', 23)

INSERT INTO [dbo].[EMPLEADO]([CEDULA],[ID_EMPLEADO],[NOMBRE],[APELLIDO1],[APELLIDO2],[CORREO],[TELEFONO],[FEC_INGRESO],[FEC_SALIDA]
           ,[ID_PUESTO],[ID_JEFATURA],[ID_DEPARTAMENTO],[DIAS_VACACIONES],[TIPO_JORNADA],[TIPO_PERFIL],[ID_LOCACION])
     VALUES
           (11111114, 103, 'Naty', 'Cordero', 'Cascante', 'naty@gmail.com', 88888884,'2011-10-13', null, 
		   14, 101, 34,9,'Diurno', 'Admin', 24)

GO

INSERT INTO [dbo].[SOLICITUD]([ID_SOLICITUD],[FEC_SALIDA],[FEC_REGRESO],[FEC_SOLICITUD],[CONCEPTO],[ESTADO_SOL],[ID_EMPLEADO])
     VALUES 
		   (301, '2022-6-9','2022-6-14','2022-6-9', 'Vacacion', 'Pendiente', 102)

INSERT INTO [dbo].[SOLICITUD]([ID_SOLICITUD],[FEC_SALIDA],[FEC_REGRESO],[FEC_SOLICITUD],[CONCEPTO],[ESTADO_SOL],[ID_EMPLEADO])
     VALUES 
		   (302, '2022-6-9','2022-6-14','2022-6-9', 'Vacacion', 'Pendiente', 102)

INSERT INTO [dbo].[SOLICITUD]([ID_SOLICITUD],[FEC_SALIDA],[FEC_REGRESO],[FEC_SOLICITUD],[CONCEPTO],[ESTADO_SOL],[ID_EMPLEADO])
     VALUES 
		   (303, '2022-6-9','2022-6-14','2022-6-9', 'Vacacion', 'Pendiente', 102)
INSERT INTO [dbo].[SOLICITUD]([ID_SOLICITUD],[FEC_SALIDA],[FEC_REGRESO],[FEC_SOLICITUD],[CONCEPTO],[ESTADO_SOL],[ID_EMPLEADO])
     VALUES 
		   (304, '2022-6-9','2022-6-14','2022-6-9', 'Vacacion', 'Pendiente', 102)

INSERT INTO [dbo].[SOLICITUD]([ID_SOLICITUD],[FEC_SALIDA],[FEC_REGRESO],[FEC_SOLICITUD],[CONCEPTO],[ESTADO_SOL],[ID_EMPLEADO])
     VALUES 
		   (305, '2022-6-9','2022-6-14','2022-6-9', 'Vacacion', 'Pendiente', 102)

GO


